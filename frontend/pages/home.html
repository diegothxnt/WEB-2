<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio - Control de Laboratorio</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>

<body>

    <main class="main-container">
        <h1>Panel de Administración</h1>
        <p>Control de Entradas y Salidas - Laboratorio de Electrónica</p>
        <hr style="margin: 20px 0; border: 0.5px solid #eee;">

        <p id="welcomeText"></p>

        <a href="#" id="logoutBtn" class="logout-link">Cerrar Sesión</a>
    </main>

    <script>
        // Verificar sesión
        async function verificarAcceso() {
            const respuesta = await fetch("/api/users/me", {
                credentials: "include"
            });

            if (!respuesta.ok) {
                window.location.href = "login.html";
                return;
            }

            const data = await respuesta.json();
            document.getElementById("welcomeText").innerText =
                `Bienvenido ${data.user.usuario}`;
        }

        verificarAcceso();

        // Cerrar sesión
        document.getElementById("logoutBtn").addEventListener("click", async (e) => {
            e.preventDefault();
            await fetch("/api/auth/logout", {
                method: "POST",
                credentials: "include"
            });
            window.location.href = "login.html";
        });
    </script>

</body>

</html>